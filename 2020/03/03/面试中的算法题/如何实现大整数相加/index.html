
<!DOCTYPE html>
<html lang class="loading">
<head><meta name="generator" content="Hexo 3.8.0">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>如何实现大整数相加 - xiyou</title>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="google" content="notranslate">
    <meta name="keywords" content="xiyou,"> 
    <meta name="description" content="1.题目给出两个很大的整数，要求实现程度求出两个整数之和。   
  

2.解题思路首先我们回顾一下小学数学课。我们是如何计算两个较大数目的加、减、乘、除的？通过列竖式进行计算，就像下面这样。那么,"> 
    <meta name="author" content="xiyou"> 
    <link rel="alternative" href="atom.xml" title="xiyou" type="application/atom+xml"> 
    <link rel="icon" href="/blog/img/favicon.png"> 
    
    <link rel="stylesheet" href="/blog/css/diaspora.css">
	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
         (adsbygoogle = window.adsbygoogle || []).push({
              google_ad_client: "ca-pub-8691406134231910",
              enable_page_level_ads: true
         });
    </script>
    <script async custom-element="amp-auto-ads" src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
</head>
</html>
<body class="loading">
    <span id="config-title" style="display:none">xiyou</span>
    <div id="loader"></div>
    <div id="single">
    <div id="top" style="display: block;">
    <div class="bar" style="width: 0;"></div>
    <a class="iconfont icon-home image-icon" href="javascript:;" data-url="http://xiyou13921.gitee.io/blog"></a>
    <div title="播放/暂停" class="iconfont icon-play"></div>
    <h3 class="subtitle">如何实现大整数相加</h3>
    <div class="social">
        <div>
            <div class="share">
                <a title="获取二维码" class="iconfont icon-scan" href="javascript:;"></a>
            </div>
            <div id="qr"></div>
        </div>
    </div>
    <div class="scrollbar"></div>
</div>

    <div class="section">
        <div class="article">
    <div class="main">
        <h1 class="title">如何实现大整数相加</h1>
        <div class="stuff">
            <span>三月 03, 2020</span>
            

        </div>
        <div class="content markdown">
            <h2 id="1-题目"><a href="#1-题目" class="headerlink" title="1.题目"></a>1.题目</h2><p>给出两个很大的整数，要求实现程度求出两个整数之和。   </p>
<a id="more"></a>  

<h2 id="2-解题思路"><a href="#2-解题思路" class="headerlink" title="2.解题思路"></a>2.解题思路</h2><p>首先我们回顾一下小学数学课。我们是如何计算两个较大数目的加、减、乘、除的？<br>通过列竖式进行计算，就像下面这样。<br><img src="/blog/img/2020/03/03/竖式运算.png"><br><br>那么，我们为什么要列出竖式来运算呢？<br>因为对于这么大的整数，我们无法一步到位直接算出结果，所以不得不把计算过程拆解成一个一个子步骤。这对于计算机来说也是一样的。<br>程序不可能通过一条指令计算出两个大整数之和，但我们却可以把大运算拆解成若干个小运算，像小学生列竖式一样进行按为计算。<br>如果大整数超出了long类型的范围，我们如何来存储这样的整数呢？<br>这个很好解决，用数组存储即可。数组的每一个元素，对应着大整数的每一个数位。  </p>
<p>在程序中列出的”竖式”究竟是什么样子呢？我们以426 709 752 318 + 95 481 253 129 为例，来看看大整数相加的详细步骤。<br><strong>第1步</strong>，创建两个整型数组，数组长度是较大整数的位数+1。把每一个整数倒序存储到数组中，整数的个位存于数组下标为0的位置，最高位存于数组的尾部。之所以倒序存储，是因为这样更符合从左到右访问数组的习惯。<br><img src="/blog/img/2020/03/03/大整数相加1.png"><br><br><strong>第2步</strong>，创建结果数组，结果数组的长度同样是较大整数的位数+1，+1的目的很明显，是给最高位进位预留的。<br><img src="/blog/img/2020/03/03/大整数相加2.png"><br><br><strong>第3步</strong>，遍历两个数组，从左到右按照对应下标把元素两两相加，就像小学生计算竖式一样。<br>在本例中，最先相加的是数组A的第1个元素8和数组B的第1个元素9，结果是7，进位1。把7填充到result数组的对应下标位置，进位的1填充到下一个位置。<br><img src="/blog/img/2020/03/03/大整数相加3.png"><br><br>第2组相加的是数组A的第2个元素1和数组B的第2个元素2，结果是3，再加上刚才的进位1。把4填充到result数组的对应下标位置。<br><img src="/blog/img/2020/03/03/大整数相加4.png"><br><br>第3组相加的是数组A的第3个元素3和数组B的第3个元素1，结果是4。把4填充到result数组的对应下标位置。<br><img src="/blog/img/2020/03/03/大整数相加5.png"><br><br>第4组相加的是数组A的第4个元素2和数组B的第4个元素3，结果是5。把5填充到result数组的对应下标位置。<br><img src="/blog/img/2020/03/03/大整数相加6.png"><br><br>以此类推······一直把数组的所有元素都相加完毕。<br><img src="/blog/img/2020/03/03/大整数相加7.png"><br><br><strong>第4步</strong>，把result数组的全部元素再次逆序，去掉首位的0，就是最终结果。<br><img src="/blog/img/2020/03/03/大整数相加8.png"><br> </p>
<p>需要说明的是，为两个大整数建立临时数组，是一种直观的解决方案。若想节省内存空间，也可以不创建这两个临时数组。  </p>
<p><strong>代码实现</strong>  </p>
<pre><code>public class Exercise {

    public static String bigNumberSum(String bigNumberA,String bigNumberB){
        //1.把两个大整数用数组逆序存储，数组长度等于较大整数位数+1
        int maxLength = bigNumberA.length()&gt;bigNumberB.length()?bigNumberA.length():bigNumberB.length();
        int[] arrayA = new int[maxLength+1];
        for (int i = 0; i &lt; bigNumberA.length(); i++) {
            arrayA[i] = bigNumberA.charAt(bigNumberA.length()-1-i)-&apos;0&apos;;
        }
        int[] arrayB = new int[maxLength+1];
        for (int i = 0; i &lt; bigNumberB.length(); i++) {
            arrayB[i] = bigNumberB.charAt(bigNumberB.length()-1-i)-&apos;0&apos;;
        }
        //2.构建result数组，数组长度等于较大整数位数+1
        int[] result = new int[maxLength+1];
        //3.遍历数组，按位相加
        for (int i = 0; i &lt; result.length; i++) {
            int tmp = arrayA[i]+arrayB[i]+result[i];
            //判断是否进位
            if(tmp&gt;=10){
                tmp = tmp-10;
                result[i+1] = 1;
            }
            result[i] = tmp;
        }
        //4.把result数组再次逆序并转成String
        StringBuilder sb = new StringBuilder();
        //是否找到大整数的最高有效位
        boolean findFirst = false;
        for (int i = result.length-1; i &gt;=0 ; i--) {
            if(!findFirst){
                if(result[i]==0){
                    continue;
                }
                findFirst = true;
            }
            sb.append(result[i]);
        }
        return sb.toString();
    }

    public static void main(String[] args) {
        System.out.println(bigNumberSum(&quot;426709752318&quot;,&quot;95481253129&quot;));
    }
}</code></pre><p>如果给出的最大整数的最长位数时n，那么创建数组、按位计算、结果逆序的时间复杂度各自都是O(n)，整体的时间复杂度也是<strong>O(n)</strong> 。  </p>
<p>当前的思路其实还存在一个可优化的地方。<br>我们之前把大整数按照数位来拆分的，即如果较大整数有50位，那么我们就需要创建一个长度为51的数组，数组中的每个元素存储其中一位数字。<br><img src="/blog/img/2020/03/03/大整数相加9.png"><br><br>那么我们有必要把原整数拆分的这么细吗？显然不需要，只需要拆分到可以<strong>被直接计算</strong>的程度就够了。<br>int类型的取值范围是-2 147 483 648~2 147 483 647，最多可以有10位整数。为了防止溢出，我们可以把大整数的每<strong>9</strong>位作为数组的一个元素，进行加法运算。（这里也可以使用long类型来拆分，按照int类型拆分仅仅是提供一个思路。）<br><img src="/blog/img/2020/03/03/大整数相加10.png"><br><br>如此一来，内存占用空间和运算次数，都压缩到了原来的1/9。  </p>
<p>就拿刚刚那个例子来说，如果我们拆分成3位数一组。如果第0位两个数相加的结果tmp=1001超过1000，那么结果数组第0位就存1(001)，第1位存放进位1，以此类推，等等。当把result数组逆序的时候要注意一下，第0位的数字是1，不足三位数，需要补两个0。  </p>
<p><strong>在java中，工具类BigInteger和BigDecimal的底层实现同样是把大整数拆分成数组进行运算的，和这个思路大体类似。</strong>  </p>

            <!--[if lt IE 9]><script>document.createElement('audio');</script><![endif]-->
            <audio id="audio" loop="1" preload="auto" controls="controls" data-autoplay="false">
                <source type="audio/mpeg" src>
            </audio>
            
                <ul id="audio-list" style="display:none">
                    
                        
                            <li title="0" data-url="http://link.hhtjim.com/163/425570952.mp3"></li>
                        
                    
                        
                            <li title="1" data-url="http://link.hhtjim.com/163/425570952.mp3"></li>
                        
                    
                </ul>
            
        </div>
        
    <div id="gitalk-container" class="comment link" data-enable="false" data-ae="false" data-ci data-cs data-r data-o data-a data-d="false">查看评论</div>


    </div>
    
</div>


    </div>
</div>
</body>

<script src="//lib.baomitu.com/jquery/1.8.3/jquery.min.js"></script>
<script src="/blog/js/plugin.js"></script>
<script src="/blog/js/typed.js"></script>
<script src="/blog/js/diaspora.js"></script>
<link rel="stylesheet" href="/blog/photoswipe/photoswipe.css">
<link rel="stylesheet" href="/blog/photoswipe/default-skin/default-skin.css">
<script src="/blog/photoswipe/photoswipe.min.js"></script>
<script src="/blog/photoswipe/photoswipe-ui-default.min.js"></script>

<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>
    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">
        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>
        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">
            <div class="pswp__top-bar">
                <!--  Controls are self-explanatory. Order can be changed. -->
                <div class="pswp__counter"></div>
                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
                <button class="pswp__button pswp__button--share" title="Share"></button>
                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>
            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>
            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>
            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>
            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>
        </div>
    </div>
</div>






</html>
